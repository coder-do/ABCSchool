@page "/roles"
@using ABCSharedLibrary.Constants

@attribute [ShouldHavePermission(SchoolAction.Read, SchoolFeature.Roles)]

<Header OnReturn="Cancel" Title="Roles" Description="Manage Roles" />

<MudTable Items="@_roleList"
          Loading="_isLoading"
          LoadingProgressColor="Color.Info"
          Elevation="25">
    <ToolBarContent>
        @if (_canCreateRoles)
        {
            <MudFab StartIcon="@Icons.Material.Filled.Add"
                
                    Size="Size.Small"
                    IconSize="Size.Medium"
                    Class="mr-2" />            
        }
    </ToolBarContent>
    <HeaderContent>
        <MudTh>Name</MudTh>
        <MudTh>Description</MudTh>
        <MudTh Style="text-align:right">Actions</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name"> @context.Name</MudTd>
        <MudTd DataLabel="Description"> @context.Description</MudTd>
        <MudTd Style="text-align:right" DataLabel="Actions">
            <MudMenu Icon="@Icons.Material.Filled.MoreVert"
                     Size="Size.Small"
                     Color="Color.Secondary"
                     TransformOrigin="Origin.BottomLeft"
                     AnchorOrigin="Origin.BottomLeft">
                @if (_canViewRolePermissions)
                {
                    <MudMenuItem OnClick="(() => ViewPermissions(context.Id))" >Permissions</MudMenuItem>                    
                }

            </MudMenu>
        </MudTd>
    </RowTemplate>
    <PagerContent>
        <MudTablePager RowsPerPageString="RowsPerPageString" InfoFormat="InfoFormat" />
    </PagerContent>
</MudTable>