@page "/schools"

@using ABCSharedLibrary.Constants

@attribute [ShouldHavePermission(SchoolAction.Read, SchoolFeature.Schools)]

<Header OnReturn="Cancel" Title="Schools" Description="Manage Schools" />

<MudTable Items="@_schoolList"
          Loading="_isLoading"
          LoadingProgressColor="Color.Info"
          Elevation="25">
    <ToolBarContent>
        @if (_canCreateSchools)
        {
            <MudFab StartIcon="@Icons.Material.Filled.Add"
                    OnClick="OnBoardNewSchoolAsync"
                    Size="Size.Small"
                    IconSize="Size.Medium"
                    Class="mr-2" />
        }
    </ToolBarContent>
    <HeaderContent>
        <MudTh>Name</MudTh>
        <MudTh>Established Date</MudTh>
        <MudTh Style="text-align:right">Actions</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name"> @context.Name</MudTd>
        <MudTd DataLabel="Established Date"> @context.EstablishedDate.ToString("dd MMM yyyy")</MudTd>
        <MudTd Style="text-align:right" DataLabel="Actions">
            <MudMenu Icon="@Icons.Material.Filled.MoreVert"
                     Size="Size.Small"
                     Color="Color.Secondary"
                     TransformOrigin="Origin.BottomLeft"
                     AnchorOrigin="Origin.BottomLeft">
                @if (_canUpdateSchools)
                {
                    <MudMenuItem>Update</MudMenuItem>
                }
                @if (_canDeleteSchools)
                {
                    <MudMenuItem>Delete</MudMenuItem>
                }

            </MudMenu>
        </MudTd>
    </RowTemplate>
    <PagerContent>
        <MudTablePager RowsPerPageString="RowsPerPageString" InfoFormat="InfoFormat" />
    </PagerContent>
</MudTable>